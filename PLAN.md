# Process

https://gist.github.com/samuelcolvin/814f6609bdacb2cd8c80d3494fc67802

* read config
* read extensions
* apply extensions to config
* read `site` directory
* apply defaults from config to each page
* build SOM
* apply modifiers to each page context
* generate "synthetic pages"
* apply SOM modifiers
* load data
* generate scss, apply hash
* generate external (eg. js)
* load templates
* build 

# Parallel builds

the following can happen in parallel:
* read files > apply extensions
* load data
* generate sass
* generate js

Pages can then be generated by a pool of processes

For development sass and js can be generated in parallel to everything else. For
production js and sass need to be generated before files as they'll include hashes.  

# Images

Perhaps need an equivalent to sass/js build which modifies raw images to be the right size/quality?

# Opinionated JS

default webpack config with no need to setup?

# Config options

* defaults for paths
* ignored directories where files arn't modified, just copied across

# Tree structure:

```
.
├── extensions.py
├── harrier.yml
├── data
│   └── foobar.csv
├── site
│   ├── features
│   │   └── thing.md
│   ├── index.html
│   └── whatever.html
└── theme
    ├── assets
    │   └── background.jpg
    ├── js
    │   └── index.js
    ├── sass
    │   └── main.scss
    └── templates
        └── index.jinja
```

# TODO

* rewrite extensions to use a class where methods can be overridden, including a property `extra_filters` which sets
  jinja filters etc.
* extra extensions:
  * Could also do on_save modifiers which run before files are saved
  * also override_copy which modify the copy command both in render and copy_assets
  * override_webpack to modify webpack args/env
  * modify_data to change/extend data
* extra context functions:
  * `site.each(glob='...', or regex='...')`
